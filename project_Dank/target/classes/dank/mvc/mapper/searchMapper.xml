<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="qna">
 <select id="listsearch" resultType="qnavo" parameterType="pvo" >
      select * from (
    select rownum r_num, a.* from 
    (
     select * from qna 
     <if test="searchValue != null">
     <where>
      <choose>
        <when test="searchType==1">
          writer Like '%'|| #{searchValue} ||'%' 
        </when>
        <when test="searchType==2">
          grpcode Like '%'|| #{searchValue} ||'%' 
        </when>
        <when test="searchType==3">
          comm Like '%'|| #{searchValue} ||'%' 
        </when>
        <otherwise></otherwise>
      </choose>
     </where>
     </if>
      order by num desc
    ) a
    ) WHERE  r_num between #{begin} and #{end}
     
   </select>
   
   </mapper>